!function(a){function b(a){var b=new Date;b.setDate(b.getDate()+a);var c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();return c+"-"+d+"-"+e}var c=function(){this.main()};c.prototype={main:function(){this.addDate(),this.selectShow(),this.selectHide(),this.dataSelect(),this.formSubmit()},addDate:function(){for(var c="",d=7,e=0;d>e;e++){var f=b(e);c+='<li data-value="'+f+'">'+f+"</li>"}a("#book-date-option ul").append(c)},selectShow:function(){var b=new iScroll("book-date-option"),c=new iScroll("book-human-option");a(".book-select").on("click",function(){var d=a(this).find(".book-option"),e="book-date-option"==d.attr("id")?b:c;d.height()?d.height(0):(a(".book-option").height(0),d.height("7.75rem"),setTimeout(function(){e.refresh()},100))})},selectHide:function(){a("body").on("click",function(){a(".book-option").each(function(){a(this).height()&&a(this).height(0)})}),a(".book-select").on("click",function(a){a.stopPropagation()})},dataSelect:function(){a(".book-option").off("click","li").on("click","li",function(){var b=a(this).data("value"),c=a(this).html(),d=a(this).parents(".book-option").data("type");a("#input"+d).val(b),a("#book-"+d).html(c)})},formSubmit:function(){a("#book-btn").on("click",function(){var b=a("#inputdate").val(),c=a("#inputhuman").val(),d=a("input[name=name]").val(),e=a("input[name=telephone]").val();return""==b?(alert("请选择预订日期"),!1):""==c?(alert("请选择用餐人数"),!1):""==d?(alert("请输入姓名"),!1):""==e?(alert("请输入联系方式"),!1):void a.ajax({type:"POST",url:"/wechat/book/register",data:a("#book-register").serialize(),dataType:"json",success:function(a){return"success"!=a.status?(alert(a.msg),!1):void(location.href="/wechat/index")}})})}},window.Book=c||{}}(window.Zepto),$(function(){FastClick.attach(document.body);new Book});